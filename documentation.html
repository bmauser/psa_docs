<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PhpStartApp tutorial</title>
<style type="text/css">
.main_content {
	font-family: Verdana, Geneva, sans-serif;
	font-size: 9pt;
	background-color: #333;
	width: 800px;
	margin-right: auto;
	margin-left: auto;
	padding: 5px
}
.header {
	font-family: Verdana, Geneva, sans-serif;
	width: 800px;
	margin-right: auto;
	margin-left: auto
}
.header h1 {
	font-size: 40pt;
	color: #000;
	display: inline
}
.content {
	background-color: #FFF;
	padding-top: 5px;
	padding-right: 5px;
	padding-bottom: 15px;
	padding-left: 5px
}
.insource {
	font-family: "Courier New", Courier, monospace
}
/* tables */
.table1 td {
	border-right-width: 1px;
	border-right-style: solid;
	border-right-color: #999;
	padding-right: 5px;
	padding-left: 5px;
	border-bottom-width: 2px;
	border-bottom-style: solid;
	border-bottom-color: #CCC
}
.main_content h1 {
	font-size: 16pt;
	font-weight: bold;
	margin-top: 15px;
	color: #FFF;
	margin-bottom: 15px;
	background-color: #333;
	padding-top: 5px;
	padding-right: 10px;
	padding-bottom: 5px;
	padding-left: 5px;
	left: -25px;
	position: relative;
	display: inline-block;
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px
}
h2 {
	font-size: 14pt;
	font-weight: bold;
	margin-top: 20px;
	padding-left: 15px;
	color: #FFF
}
h3 {
	font-size: 10pt;
	font-weight: bold
}
.by {
	font-size: 8pt;
	position: relative;
	color: #CCC;
	text-align: right;
	margin-bottom: 6px;
	font-style: italic
}
.table1 tr.disabled {
	color: #999
}
.table1 th {
	border-right-width: 1px;
	border-right-style: solid;
	border-right-color: #CCC;
	border-bottom-width: 2px;
	border-bottom-style: solid;
	border-bottom-color: #666;
	padding-top: 2px;
	padding-right: 5px;
	padding-bottom: 2px;
	padding-left: 5px;
	color: #333
}
.table1 td {
	padding: 5px;
}
.table1 tr:hover {
	background-color: #E6ECFF
}
.showsource, .showsource_ex {
	font-family: "Courier New", Courier, monospace;
	white-space: pre;
	background-color: #F0F0F0;
	margin-bottom: 10px;
	padding: 5px;
	overflow: scroll
}
.fp {
	font-weight: bold;
	color: #06F
}
.donatecont {
	background-color: #6CFF8A;
	padding: 5px;
	-moz-border-radius: 10px;
	-webkit-border-radius: 10px;
	border-radius: 10px;
	margin-top: 25px;
	margin-right: 15px;
	margin-bottom: 15px;
	margin-left: 15px;
	text-align: center;
	font-family: Verdana, Geneva, sans-serif;
	font-size: 11pt;
	font-weight: bold;
	color: #333;
	border: 1px solid #666
}
.flowcontainer {
	margin-top: 20px;
	position: relative;
	background-color: #E6E6E6;
	border-radius: 6px;
	padding: 5px;
	width: 80%;
	margin-right: auto;
	margin-left: auto;
	color: #000;
	border: 2px solid #36C;
}
.flowcontainer_arrow:after {
	content: '';
	position: absolute;
	top: 100%;
	left: 50%;
	margin-left: -20px;
	width: 0;
	height: 0;
	border-top-width: 20px;
	border-right-width: 20px;
	border-left-width: 20px;
	border-top-style: solid;
	border-right-style: solid;
	border-left-style: solid;
	border-top-color: #E6E6E6;
	border-right-color: transparent;
	border-bottom-color: transparent;
	border-left-color: transparent;
}
.flowcontainer_arrow:before {
	content: '';
	position: absolute;
	top: 100%;
	left: 50%;
	margin-left: -21px;
	width: 0;
	height: 0;
	border-top: 22px solid #36C;
	border-right: 22px solid transparent;
	border-left: 22px solid transparent;
}
.blists {
	list-style-type: square;
}
.blists li {
	margin-top: 10px;
}
</style>
</head>

<body>
<div class="header">
	<h1>PhpStartApp</h1>
	<span style="font-size: 12pt;">How to start a PHP application</div>
</div>
<div class="main_content"> 
	
	<!-- section -->
	<div class="content">
		<h3>Contents of this document:</h3>
		<ul>
			<li><a href="#whatis">What is PhpStartApp (PSA)?</a></li>
			<li><a href="#install">How to start? (skeleton application install)</a></li>
			<li><a href="#howitworks">How it works?</a></li>
			<li><a href="#importantvalues">Important values</a></li>
			<li><a href="#conventions">Conventions</a></li>
			<li><a href="#database">Database</a></li>
		</ul>
	</div>
	<h1>What is PhpStartApp (PSA)?<a name="whatis" id="whatis"></a></h1>
	<div class="content">
		<p>PhpStartApp is a simple PHP  application which is intended to be the base or the starting point for  a PHP application. It is  an application based on the small  framework called PSA in which I included only those features that I've been using  in almost all  applications I've been working on in a past few years.</p>
		<p>The  idea	was	to make a simple starting point for a PHP application without a lot of conventions,  abstraction layers  or wrappers  to learn. Once I  needed  a relatively simple  base for my new application and started this project for myself  and then decided to publish it. </p>
		<p>&nbsp;</p>
		<p>Documentation is short, there is only this page  and a <strong><a href="sdfsdf">reference manual</a></strong>. But if you have any experience with PHP  it should be very easy for you to try PSA.</p>
<p><strong>Main features:</strong></p>
		<ul>
			<li>classes for basic actions with users and groups</li>
			<li>model-view-controller design pattern </li>
			<li>logging of main activities </li>
			<li>templating engine (<a href="http://www.smarty.net/" target="_blank">Smarty</a>, php templates)</li>
			<li>user input validation</li>
			<li>hooks</li>
		</ul>
		<p><strong>Home page:</strong> <a href="http://code.google.com/p/phpstartapp">http://code.google.com/p/phpstartapp</a> </p>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="donate_form" style="text-align:center">
			<input type="hidden" name="cmd" value="_s-xclick" />
			<input type="hidden" name="hosted_button_id" value="WXSFX7BSN22SL" />
			<input type="hidden" name="on0" value="Donation" />
			<input type="hidden" name="currency_code" value="USD" />
			<select name="os0" style="margin-top:5px;margin-bottom:5px;">
				<option value="-">- $1.00</option>
				<option value="--">-- $3.00</option>
				<option value="---" selected="selected">--- $5.00</option>
				<option value="----">---- $10.00</option>
				<option value="-----">----- $15.00</option>
				<option value="------">------ $20.00</option>
			</select>
			<br />
			<input name="submit" type="image" src="https://www.paypalobjects.com/WEBSCR-640-20110429-1/en_US/i/btn/btn_donate_LG.gif" alt="Donate via PayPal" title="Donate via PayPal" align="middle" border="0" />
		</form>
	</div>
	<!-- section -->
	<h1>How to start? (skeleton application install)<a name="install" id="install"></a></h1>
	<div class="content">
		<p>Use the skeleton application as a base for your new  application. Skeleton application is a small example application  which is meant to be used as a starting point for your new  application. </p>
		<p>To install skeleton application download  archive from <a href="http://code.google.com/p/phpstartapp/downloads/list">download page</a>. Extract archive   and follow instructions in <a href="sdsd">INSTALL.txt</a> file. These are more or less standard steps to install  PHP application, except running shell helper script to register files for autoloader.</p>
		<p>When you're done you should be able to login into the installed application. See the skeleton application <a href="yxcyxc">here</a> (username and password: psa).</p>
	</div>
	
	<!-- section -->
	<h1>How  it works?<a name="howitworks" id="howitworks"></a></h1>
	<div class="content">
		<p>Here is  a workflow  how   the skeleton application works, what is happening on a HTTP request. Look at the code of the installed skeleton application and see also comments there.</p>
		<div class="flowcontainer flowcontainer_arrow"> When you open a  page of your application in the web browser, for example  http://localhost/mytestapp/default/login, <em><strong>index.php</strong></em> file is loaded and it only includes <em>front_controller.php</em> file in the <em>app/psa/</em> directory</div>
		<div class="flowcontainer flowcontainer_arrow"><em>front_controller.php</em> includes some necessary  files of the PSA framework and 
			sets some values like base directory and base URL. Then it 
			includes<strong> <em>app/Main.php</em></strong> file and calls <strong>Main::psa_main()</strong> method.</div>
		<div class="flowcontainer flowcontainer_arrow">
			<p><em>Main.php</em> is the bootstrap file (first loaded php file) of your application. Here comes your application code.</p>
			<p><strong>Main::psa_main()</strong> method will be called first by <em>front_controller.php</em>.<br />
				Here is the place for you to include some .php files if you need, set some constants or similar. 
				Here you also need to decide which actions to make for a given URL because all URLs will be rewritten to <em>index.php</em> file. That is behavior of web server set by <em>.htaccess</em> file (for Apache) in application root folder. So every request (if the requested file doesn't exist) will go through <em>Main.php</em> and your application needs to decide what to do (which action to make) for a given URL.</p>
			<p> By default first part of URL after application root folder is the name of the controller ('default') and second part ('login') is the name of the action to call. Controller is a class and action is a method in that class. So your application instances controller  class and calls  method (action) in controller object. That is the default action of the <strong>Psa_Router::dispatch()</strong> method.</p>
		</div>
		<div class="flowcontainer">Action method from controller object is called and  that method calls <strong>model</strong> and <strong>view</strong> methods. Model methods should contain the business logic (calculations, database interaction) of your application and view methods are places for the logic that is  needed only for displaying HTML page, for example assigning some values to the templates.</div>
		<p>&nbsp;</p>
	</div>
	
	<!-- section -->
	<h1>Important values<a name="importantvalues" id="importantvalues"></a></h1>
	<div class="content">
		<p>Some important values:</p>
		<ul class="blists">
			<li><strong>$this-&gt;psa_database</strong> (in models) - <a href="vv">Psa_PDO</a> object</li>
			<li><strong>$this-&gt;psa_registry</strong> (in models and views) - global registry object
				<ul>
					<li><strong>$this-&gt;psa_registry-&gt;CFG</strong> - your application config array (defined in <em>app/config.php</em>)</li>
					<li><strong>$this-&gt;psa_registry-&gt;PSA_CFG</strong> - PSA config array (defined in<em> app/psa/config.php</em> or <em>app/psa/config_override.php</em>)</li>
					<li><strong>$this-&gt;psa_registry-&gt;basedir_web</strong> - application folder from web root (automatically set by <em>app/psa/front_controller.php</em> or manually by $PSA_CFG['folders']['basedir_web'] config value)<br />
						Example: '/test/mytestapp'</li>
					<li><strong>$this-&gt;psa_registry-&gt;base_url</strong> - application home URL (set by <em>app/psa/front_controller.php</em>)<br />
						Example: 'https://localhost/test/mytestapp'</li>
				</ul>
			</li>
			<li><strong>$this-&gt;psa_result</strong> (in models and views) - global result object</li>
			<li><strong>PSA_BASE_DIR</strong> constant with file system path to <em>app/psa</em> directory</li>
			<li><strong>APP_BASE_DIR</strong> constant with file system path to application home directory</li>
		</ul>
	</div>
	
	<!-- section -->
	<h1>Conventions<a name="conventions" id="conventions"></a></h1>
	<div class="content">
		<ul class="blists">
			<li>By default controller classes should be called like <strong>Name_Controller</strong></li>
			<li>By default action methods inside controller class should be called like <strong>name_action</strong></li>
			<li>Bootstrap file is called <strong>Main.php</strong></li>
			<li>For autoloading classes put one class per .php file and give the file the same name as the class. For example <strong>class Example put in the file named Example.php</strong></li>
			<li>Also, for <strong>autoloading</strong> you need to register all classes that can be autoloaded. There is a helper command line script <strong><em>app/psa/register_files.php</em></strong> for that. Just call it in shell with command: <span class="insource"><strong>php register_files.php </strong></span><br />
				It will generate one .php file (path is set by <span class="insource">$PSA_CFG['autoload_data_file']</span>) containing array with all classes and their paths. If you add a new file to your project you need to register files again. If develop mode is on (<span class="insource">$PSA_CFG['develop_mode']</span>) and <span class="insource">$PSA_CFG['develop_mode_register_files']</span> is true, file registration will be invoked automatically on every request. Only files in folders set by <span class="insource">$PSA_CFG['folders']['autoload'][]</span> and <span class="insource">$PSA_CFG['folders']['hook_autoload'][]</span> arrays will be registered.</li>
		</ul>
	</div>
	
	<!-- section -->
	<h1>Database<a name="database" id="database"></a></h1>
	<div class="content">
		<p>Skeleton application uses a simple database. Database is used for storing users and groups and logs by default.  You can extend the database schema and add columns and tables. There are two .sql files with the initial database table definitions inside <em>_INSTALL</em> directory if you downloaded PSA archive. <em><a href="http://phpstartapp.googlecode.com/svn/trunk/install/db_mysql.sql">db_mysql.sql</a></em> is for MySQL database and <em><a href="http://phpstartapp.googlecode.com/svn/trunk/install/db_pgsql.sql">db_pgsql.sql</a></em> is for PostgreSQL database.<br />
			PSA uses <a href="http://www.php.net/pdo">PHP Data Objects (PDO)</a> extension for database access. See <a href="http://karmela.fsb.hr/%7Ebmauser/phpstartapp/documentation/psa/Psa_Pdo.html">Psa_PDO</a> class for more details.</p>
		<p>Table description:</p>
		<ul>
			<li><strong>psa_user</strong> - holds data about users </li>
			<li><strong>psa_group</strong> - holds data about user groups </li>
			<li><strong>psa_user_in_group</strong> - for relationship between users and groups </li>
			<li><strong>psa_log</strong> - table for logs if logging to database is enabled </li>
			<li><strong>psa_profile_log</strong> - table for simple profile logs if profiling is enabled</li>
		</ul>
	</div>
	
	<!-- main div --> 
</div>
</body>
</html>
