<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class Psa_Files | PSA Reference</title>

	<script type="text/javascript" src="resources/combined.js?3555732264"></script>
	<script type="text/javascript" src="elementlist.js?701754439"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/bootstrap.min.css?260161822" />
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?2015443609" />

</head>

<body>
	<div id="navigation" class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a href="index.html" class="brand">PSA Reference</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li>
							<a href="package-PSA.more.html" title="Summary of PSA\more"><span>Package</span></a>
						</li>
						<li class="active">
<span>Class</span>						</li>




					</ul>
				</div>
			</div>
		</div>
	</div>

	<div id="left">
	<div id="menu">
		<form id="search" class="form-search">
			<input type="hidden" name="cx" value="" />
			<input type="hidden" name="ie" value="UTF-8" />
			<input type="text" name="q" class="search-query" placeholder="Search" />
		</form>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-PSA.html">PSA<span></span></a>
						<ul>
				<li class="main"><a href="package-PSA.exceptions.html">exceptions</a>
						</li>
				<li class="active main"><a href="package-PSA.more.html">more</a>
						</li>
							</ul></li>
			</ul>
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Psa_Active_Record.html">Psa_Active_Record</a></li>
				<li><a href="class-Psa_Dully.html">Psa_Dully</a></li>
				<li class="active"><a href="class-Psa_Files.html">Psa_Files</a></li>
				<li><a href="class-Psa_Smarty.html">Psa_Smarty</a></li>
				<li><a href="class-Psa_View.html">Psa_View</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class Psa_Files</h1>


	<div class="description">
	
<p>Class that collects (registers) information about file paths in your
application for autoloading.</p>

<p>If <var>$PSA_CFG['develop_mode']</var> is true and
<var>$PSA_CFG['develop_mode_register_files']</var> is true, file registration is
done on every request for convenience that you don't need to manually register
files if you add some class to your project.</p>

<p>This class implements <a href="http://en.wikipedia.org/wiki/Singleton_pattern">singleton pattern</a> so you can get reference to Psa_Files object from any scope
with <code><a href="class-Psa_Files.html#_get_instance">Psa_Files::get_instance()</a></code> method. You cannot make instance of Psa_Files object
with the <var>new</var> operator.</p>

	</div>

	<dl class="tree well">
		<dd style="padding-left:0px">
Psa_Singleton
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>Psa_Files</span></b>			
			
			
		</dd>
	</dl>








	<div class="alert alert-info">
		
		
		
		<b>Package:</b> <a href="package-PSA.html">PSA</a>\<a href="package-PSA.more.html">more</a><br />

				<b>Author:</b>
				Bojan Mauser &lt;<a
href="mailto:bmauser&#64;gmail.com">bmauser&#64;<!---->gmail.com</a>&gt;<br />
				<b>See:</b>
				register_files.php<br />
		<b>Located at</b> <a href="source-class-Psa_Files.html#32-363" title="Go to source code">lib/Psa_Files.php</a><br />
	</div>



		<h2>Methods summary</h2>
		<table class="summary table table-bordered table-striped" id="methods">
		<tr data-order="get_instance" id="_get_instance">

			<td class="attributes"><code>
				 public static
				<code><a href="class-Psa_Files.html">Psa_Files</a></code>
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_get_instance">#</a>
			<code><strong><a href="source-class-Psa_Files.html#60-75" title="Go to source code">get_instance</a></strong>( <span>mixed <var>$classname</var> = __CLASS__</span> )</code>

			<div class="description short">
				
<p>Returns object's instance.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Returns object's instance.</p>

<p>You should statically call this method with scope resolution operator (::)
which gives you instance to the object from any scope in your application.</p>

<p><b>Example:</b></p>

<pre>
<span class="php-var">$files</span> = Psa_Files::get_instance();
</pre>




					<h4>Returns</h4>
					<div class="list">
						<code><code><a href="class-Psa_Files.html">Psa_Files</a></code></code><br>Instance of Psa_Files object.<br />
					</div>



					<h4>Overrides</h4>
					<div class="list"><code>Psa_Singleton::get_instance</code></div>

			</div>
			</div></td>
		</tr>
		<tr data-order="set_data" id="_set_data">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_set_data">#</a>
			<code><strong><a href="source-class-Psa_Files.html#78-108" title="Go to source code">set_data</a></strong>( )</code>

			<div class="description short">
				
<p>Reads data about registered files from generated <kbd>autoload_data.php</kbd>
file and fills <code><a href="class-Psa_Files.html#$files_data">Psa_Files::<var>$files_data</var></a></code> member array.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Reads data about registered files from generated <kbd>autoload_data.php</kbd>
file and fills <code><a href="class-Psa_Files.html#$files_data">Psa_Files::<var>$files_data</var></a></code> member array.</p>

<p><b>Note:</b> you don't need to call this method if you called <code><a href="class-Psa_Files.html#_save">Psa_Files::save()</a></code>
or <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method before because <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method will also
fill <code><a href="class-Psa_Files.html#$files_data">Psa_Files::<var>$files_data</var></a></code> array. This method only reads previously saved files
data from the file.</p>




					<h4>Returns</h4>
					<div class="list">
						<code>integer</code><br>1-sucess, 0-failure<br />
					</div>


					<h4>See</h4>
					<div class="list">
							<code>mixed</code><br />
							<code><code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code></code><br />
							<code><code><a href="class-Psa_Files.html#_save">Psa_Files::save()</a></code></code><br />
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="register" id="_register">

			<td class="attributes"><code>
				 public 
				array|integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_register">#</a>
			<code><strong><a href="source-class-Psa_Files.html#111-218" title="Go to source code">register</a></strong>( <span>array <var>$additional_autoload_folders</var> = <span class="php-keyword1">array</span>()</span>, <span>array <var>$additional_hook_autoload_folders</var> = <span class="php-keyword1">array</span>()</span> )</code>

			<div class="description short">
				
<p>Registers files.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Registers files.</p>

<p>It searches for .php files in folders defined by
<var>$PSA_CFG['folders']['hook_def']</var>,
<var>$PSA_CFG['folders']['autoload']</var> and
<var>$PSA_CFG['folders']['hook_autoload']</var> and returns array with file
names and corresponding paths. It will search in content of .php files located
in folders listed in <var>$PSA_CFG['folders']['hook_autoload']</var> array for
classes that extends hook classes.</p>

<p>Returning array may look like this:</p>

<pre>
<span class="php-keyword1">Array</span>
(
    [class_paths] =&gt; <span
class="php-keyword1">Array</span>
        (
            [Main_View] =&gt; /app/psa/../views/Main_View.php
            [Sum_View] =&gt; /app/psa/../views/Sum_View.php
            [Default_Controller] =&gt; /app/psa/../controllers/Default_Controller.php
            [Unauthorized_Exception] =&gt; /app/psa/../exceptions/Unauthorized_Exception.php
            [Psa_Hook_After_Group_Create] =&gt; /psa/hooks/Psa_Hook_After_Group_Create.php
            ....
        )

    [hooks] =&gt; <span
class="php-keyword1">Array</span>
        (
            [Psa_Hook_Before_Group_Delete] =&gt; <span
class="php-keyword1">Array</span>
                (
                    [My_Hook1] =&gt; /app/psa/../hooks/My_Hook1.php
                    [My_Hook2] =&gt; /pplication/psa/../hooks/My_Hook2.php
                )
        )
)
</pre>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$additional_autoload_folders</var></dt>
												<dd><code>array</code><br>Array with paths.</dd>
						<dt><var>$additional_hook_autoload_folders</var></dt>
												<dd><code>array</code><br>Array with paths.</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>array|integer</code><br>Array with files data.<br />
					</div>


					<h4>See</h4>
					<div class="list">
							<code><code><a href="class-Psa_Files.html#_save">Psa_Files::save()</a></code></code><br />
							config.php<br />
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="save" id="_save">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_save">#</a>
			<code><strong><a href="source-class-Psa_Files.html#330-362" title="Go to source code">save</a></strong>( <span>array <var>$files_data</var> = <span class="php-keyword1">null</span></span> )</code>

			<div class="description short">
				
<p>Saves data about registered files returned from <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method to
the file.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Saves data about registered files returned from <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method to
the file.</p>

<p>By default the data is stored in <kbd>autoload_data.php</kbd> file. You can
change that with <var>$PSA_CFG['autoload_data_file']</var> config value. If
called without arguments, it first calls <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method. Throws
<code><a href="class-Psa_File_Exception.html">Psa_File_Exception</a></code> on error.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$files_data</var></dt>
												<dd><code>array</code><br>array returned from <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>integer</code><br>1 for sucess<br />
					</div>

					<h4>Throws</h4>
					<div class="list">
						<code><code><a href="class-Psa_File_Exception.html">Psa_File_Exception</a></code></code><br />
					</div>

					<h4>See</h4>
					<div class="list">
							<code><code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code></code><br />
							config.php<br />
					</div>


			</div>
			</div></td>
		</tr>
		</table>

		<h3>Methods inherited from Psa_Singleton</h3>
		<p class="elementList">
			<code>__clone()</code>, 
			<code>__construct()</code>
		</p>










		<h2>Properties summary</h2>
		<table class="summary table table-bordered table-striped" id="properties">
		<tr data-order="files_data" id="$files_data">
			<td class="attributes"><code>
				public  
				array
			</code></td>

			<td class="name">
					<a href="source-class-Psa_Files.html#49-57" title="Go to source code"><var>$files_data</var></a>
			</td>
			<td class="description"><div>
				<a href="#$files_data" class="anchor">#</a>

				<div class="description short">
					
<p>Array which holds data about registered files.</p>

				</div>

				<div class="description detailed hidden">
					
<p>Array which holds data about registered files.</p>

<p>This array is set with <code><a href="class-Psa_Files.html#_set_data">Psa_Files::set_data()</a></code> method. Array structure is the same
as array returned from <code><a href="class-Psa_Files.html#_register">Psa_Files::register()</a></code> method.</p>


				</div>
			</div></td>
		</tr>
		</table>






</div>
	</div>

	<div style="padding: 15px; border-top: 5px solid #CCC; margin-top: 20px;">
	<div id="disqus_thread"></div>
</div>

<script type="text/javascript">
	var disqus_shortname = 'phpstartapp';
	var disqus_identifier = 'class-Psa_Files';
	// var disqus_title = '';
	// var disqus_url = '';

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
</div>
</body>
</html>
